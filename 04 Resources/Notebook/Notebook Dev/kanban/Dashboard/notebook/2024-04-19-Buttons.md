---
note_type: page
projectCategory:
  - "null"
project:
  - "[[04 Resources/Notebook/Notebook Dev/kanban/Dashboard/Dashboard.md|Dashboard]]"
people: 
topics: 
created: 2024-04-19T21:44
test: []
---
# Notes

## Something from a Daily Note

``` dataviewjs
function updateFrontmatterButton(frontmatterField, buttonText) {
    const button = dv.el('button', buttonText);
    const { DateTime } = dv.luxon;
    let file = app.workspace.getActiveFile();

    button.onclick = () => {
        const currentDate = DateTime.now().toISO({ includeOffset: true }); // Get current date and time in ISO format
        app.fileManager.processFrontMatter(file, (frontmatter) => {
            if (!frontmatter[frontmatterField]) {
                frontmatter[frontmatterField] = [];
            }
            frontmatter[frontmatterField].push(currentDate); // Append currentDate to the specified field
        });
    };
    
	if((dv.current()[frontmatterField] == "") | (dv.current()[frontmatterField] == null)) {
		button.style.display = "block";  // Show the button if the field is empty
		//console.log("if")
	} else if((dv.current()[frontmatterField] != "") | (dv.current()[frontmatterField] != null)) {
		//console.log("else")
		button.style.display = "none"; // Hide the button if the field is not empty
		dv.paragraph("Clicked")
	}	
	//console.log(dv.current()[frontmatterField])
}

// Showing the Button:
updateFrontmatterButton("pill_1", "Pill 1");

updateFrontmatterButton("breakfast_time", "Breakfast Time");

updateFrontmatterButton("pill_2", "Pill 2");

updateFrontmatterButton("lunch_time", "Lunch Time");

```

## Fussing with appearance
``` dataviewjs
function updateFrontmatterButton(frontmatterField, buttonText) {
    const button = dv.el('button', buttonText);
    const { DateTime } = dv.luxon;
    let file = app.workspace.getActiveFile();

    button.onclick = () => {
        const currentDate = DateTime.now().toISO({ includeOffset: true }); // Get current date and time in ISO format
        app.fileManager.processFrontMatter(file, (frontmatter) => {
            if (!frontmatter[frontmatterField]) {
                frontmatter[frontmatterField] = [];
            }
            frontmatter[frontmatterField].push(currentDate); // Append currentDate to the specified field
        });
    };
    
	if(dv.current()[frontmatterField] == "") {
		button.style.display = "block";  // Show the button if the field is empty
		console.log("if")
	} else if(dv.current()[frontmatterField] != "") {
		console.log("else")
		console.log(typeof(dv.current()[frontmatterField]))
		button.style.display = "none"; // Hide the button if the field is not empty
		dv.span("Clicked")
	}	
}

// Showing the Button:
updateFrontmatterButton("test", "Click me");

```


``` dataviewjs
const button = dv.el('button', 'Click me');
let file = app.workspace.getActiveFile();

button.onclick = () => {
    const currentDate = new Date().toISOString(); // Get current date and time in ISO format
    app.fileManager.processFrontMatter(file, (frontmatter) => {
        if (!frontmatter["test"]) {
            frontmatter["test"] = [];
        }
        frontmatter["test"].push(currentDate); // Append currentDate to the "test" array
    });
};
console.log(dv.current().test)
console.log(typeof(dv.current().test))

if(dv.current().test == null){
//dv.span(button) 
console.log("if")
} else {
console.log("else")
dv.span("Clicked")
}
```

## Adding Templater
- Idk seems reasonable to keep supporting my scripting engine, but its also reasonable place to look to start to replace it
- Invoke tempalter in DataviewJS
	- https://forum.obsidian.md/t/js-using-the-template-tp-object-outside-of-templater-scripts-like-in-the-console-or-customjs/71485/2
	- May be some problems depending on if Templater has been loaded yet? Curious
		- https://forum.obsidian.md/t/use-templater-api/75001
```javascript
// direct access to the "tp" templater API
const templater = app.plugins.plugins["templater-obsidian"].templater;
const tp = templater.current_functions_object;
```

``` dataviewjs
const templater = app.plugins.plugins["templater-obsidian"].templater;
const tp = templater.current_functions_object;
const button = dv.el('button', 'Click me');
let file = app.workspace.getActiveFile();

button.onclick = () => {
    tp.user.newPage(tp, dv)
};

dv.table(
    ["Column 1","Buttons"], 
    [["Bar",button]]
);
```
- Well that worked surprisingly easily
- Minimally can replace buttons
## First Draft

``` dataviewjs
const button = dv.el('button', 'Click me');
let file = app.workspace.getActiveFile();

button.onclick = () => {
    const currentDate = new Date().toISOString(); // Get current date and time in ISO format
    app.fileManager.processFrontMatter(file, (frontmatter) => {
        if (!frontmatter["test"]) {
            frontmatter["test"] = [];
        }
        frontmatter["test"].push(currentDate); // Append currentDate to the "test" array
    });
    console.log(`Date and time ${currentDate} appended to "test" array.`);
};

dv.table(
    ["Column 1","Buttons"], 
    [["Bar",button]]
);
```

``` 
const button = dv.el('button', 'Click me');
let file = app.workspace.getActiveFile();

button.onclick = () => {
    const currentDate = new Date().toISOString(); // Get current date and time in ISO format
    app.fileManager.processFrontMatter(file, (frontmatter) => {
        if (!frontmatter["test"]) {
            frontmatter["test"] = [];
        }
        frontmatter["test"].push(currentDate); // Append currentDate to the "test" array
    });
    console.log(`Date and time ${currentDate} appended to "test" array.`);
};

dv.table(
    ["Column 1","Buttons"], 
    [["Bar",button]]
);
```

## GPT

ChatGPT 3.5

Please help me make some custom buttons for my Obsidian Markdown Notebook using dataviewjs. Below is an example. This uses .onclick events. Please help me create a button onclick writes the current date and time in ISO format to a field (formatted as `field:: value`). ```dataviewjs const button = dv.el('button', 'Click me'); button.onclick = () => { //Whatever code you want to execute console.log('Button clicked!'); }; dv.table( ["Column 1","Buttons"], [["Bar",button]] ); ```

ChatGPT

Certainly! You can modify the onclick event of the button to write the current date and time in ISO format to a specific field. Here's how you can do it:

dataviewjs

``const button = dv.el('button', 'Click me');  button.onclick = () => {     const currentDate = new Date().toISOString(); // Get current date and time in ISO format     const fieldValue = `field:: ${currentDate}`; // Format the value as "field:: value"     dv.page().frontmatter.set('YourField', fieldValue); // Replace 'YourField' with the name of your field     console.log(`Date and time ${currentDate} written to field.`); };  dv.table(     ["Column 1","Buttons"],      [["Bar",button]] );``

Replace `'YourField'` with the name of the field you want to write the date and time to. This script will update the specified field with the current date and time in ISO format whenever the button is clicked.

I made some changes to get better implementation. But need some help with the action of the button. The below code shows how to correctly update the frontmatter, but I am looking to append a new item to the yaml array with each button press. ``` dataviewjs const button = dv.el('button', 'Click me'); let file = app.workspace.getActiveFile(); button.onclick = () => { const currentDate = new Date().toISOString(); // Get current date and time in ISO format const fieldValue = `field:: ${currentDate}`; // Format the value as "field:: value" app.fileManager.processFrontMatter(file, (frontmatter) => { frontmatter["test"] = "\n - " + currentDate + "\n - " + frontmatter["test"]; }); console.log(`Date and time ${currentDate} written to field.`); }; dv.table( ["Column 1","Buttons"], [["Bar",button]] ); ```

ChatGPT

To append a new item to a YAML array in the frontmatter of a file each time the button is pressed, you can modify the button's onclick event to properly update the frontmatter. Here's how you can do it:

dataviewjs

``const button = dv.el('button', 'Click me'); let file = app.workspace.getActiveFile();  button.onclick = () => {     const currentDate = new Date().toISOString(); // Get current date and time in ISO format     app.fileManager.processFrontMatter(file, (frontmatter) => {         if (!frontmatter["test"]) {             frontmatter["test"] = [];         }         frontmatter["test"].push(currentDate); // Append currentDate to the "test" array         app.fileManager.saveFrontMatter(file, frontmatter); // Save the updated frontmatter     });     console.log(`Date and time ${currentDate} appended to "test" array.`); };  dv.table(     ["Column 1","Buttons"],      [["Bar",button]] );``

This code will append the current date and time in ISO format as a new item to the "test" array in the frontmatter each time the button is pressed. Make sure to replace `"test"` with the name of your YAML array.


# Tasks
